<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>버섯 생육 시뮬레이션 뷰어</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, Arial; background:#0b0e11; color:#eee; margin:0; }
    header { padding:16px 24px; border-bottom:1px solid #222; }
    h1 { margin:0; font-size:20px; }
    main { display:grid; grid-template-columns:320px 1fr; gap:16px; padding:20px; max-width:1200px; margin:0 auto; }
    .card { background:#141a20; padding:16px; border-radius:12px; border:1px solid #222; }
    label { font-size:13px; display:block; margin:8px 0 4px; color:#9fb0c0; }
    select { width:100%; padding:8px; border-radius:8px; background:#0f141a; color:#fff; border:1px solid #333; }
    video { width:100%; border-radius:12px; background:#000; }
    .status { font-size:13px; color:#9fb0c0; margin-top:6px; }
    .err { color:#ffa8a8; }
    .row { display:grid; grid-template-columns:1fr 1fr; gap:12px; }
    .hint { font-size:12px; color:#9fb0c0; margin-top:8px; }
    button { padding:6px 12px; border-radius:8px; border:1px solid #333; background:#222; color:#eee; cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <h1>버섯 생육 시뮬레이션</h1>
    <p>Stage1 → Stage2 조건을 선택하면 해당 시뮬레이션을 보여줍니다.</p>
  </header>

  <main>
    <section class="card">
      <h2>Stage1 조건</h2>
      <label for="s1temp">온도(°C)</label>
      <select id="s1temp">
        <option value="13">13</option>
        <option value="18" selected>18</option>
        <option value="23">23</option>
      </select>
      <label for="s1light">광</label>
      <select id="s1light">
        <option value="on">on</option>
        <option value="off">off</option>
      </select>

      <h2>Stage2 조건</h2>
      <label for="s2temp">온도(°C)</label>
      <select id="s2temp">
        <option value="15">15</option>
        <option value="18">18</option>
      </select>
      <label for="s2hum">습도(%)</label>
      <select id="s2hum">
        <option value="60">60</option>
        <option value="80" selected>80</option>
        <option value="99">99</option>
      </select>
      <label for="s2light">광</label>
      <select id="s2light">
        <option value="on">on</option>
        <option value="off">off</option>
      </select>
      <label for="thinning">솎기</label>
      <select id="thinning">
        <option value="5">5</option>
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="none" selected>무처리</option>
      </select>

      <h2>추가 보기</h2>
      <label for="quality">품질 등급</label>
      <select id="quality">
        <option value="none" selected>—</option>
        <option value="특상">특상</option>
        <option value="상">상</option>
        <option value="보통">보통</option>
      </select>
      <label for="aging">노화 과정</label>
      <select id="aging">
        <option value="none" selected>—</option>
        <option value="on">보기</option>
      </select>

      <div class="hint">파일명 규칙: mushroom_S1T{온도}_L{광}_S2T{온도}_H{습도}_L{광}_T{솎기}.mp4</div>
    </section>

    <section class="card">
      <video id="player" controls muted autoplay playsinline></video>
      <div id="status" class="status">조건을 선택하세요.</div>
    </section>
  </main>

  <script>
    const base = "assets/videos";

    const selS1T = document.getElementById("s1temp");
    const selS1L = document.getElementById("s1light");
    const selS2T = document.getElementById("s2temp");
    const selS2H = document.getElementById("s2hum");
    const selS2L = document.getElementById("s2light");
    const selThin = document.getElementById("thinning");
    const selQual = document.getElementById("quality");
    const selAging= document.getElementById("aging");

    const player = document.getElementById("player");
    const status = document.getElementById("status");

    function updateVideo() {
      let src = "";
      if (selQual.value !== "none") {
        // 품질 등급 영상
        src = `${base}/quality/${selQual.value}.mp4`;
      } else if (selAging.value === "on") {
        // 노화 과정 영상
        src = `${base}/aging/aging.mp4`;
      } else {
        // 기본 Stage1 + Stage2 조합
        const file = `mushroom_S1T${selS1T.value}_L${selS1L.value}`
                   + `_S2T${selS2T.value}_H${selS2H.value}_L${selS2L.value}_T${selThin.value}.mp4`;
        src = `${base}/${file}`;
      }

      player.src = src;
      player.play().catch(()=>{});
      status.textContent = `재생 중: ${src}`;
    }

    [selS1T, selS1L, selS2T, selS2H, selS2L, selThin, selQual, selAging].forEach(el => {
      el.addEventListener("change", updateVideo);
    });

    // 초기 로드
    updateVideo();
  </script>
</body>
</html>
